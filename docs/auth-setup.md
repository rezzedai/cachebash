# Firebase Authentication Setup

This guide documents how to enable and configure authentication providers for CacheBash (Firebase project ID: `cachebash-app`).

## Email/Password Provider

Email/password authentication is already enabled in the Firebase Console.

- Go to Firebase Console → Authentication → Sign-in method → Email/Password
- Verify it is enabled

## Google OAuth Provider

### Firebase Console Setup

1. Navigate to Firebase Console → Authentication → Sign-in method
2. Click "Add new provider" and select Google
3. Enable the provider
4. Set the project support email (required by Google)
5. Click "Save"

The Web client ID is auto-generated by Firebase.

### Mobile App Integration

The mobile app uses `expo-auth-session` to handle the OAuth flow with Firebase JS SDK.

- Google OpenID discovery document: `https://accounts.google.com/.well-known/openid-configuration`
- The Firebase JS SDK exchanges the OAuth token for a Firebase credential

### Environment Variables

- `GOOGLE_WEB_CLIENT_ID`: Available in Firebase Console → Authentication → Sign-in method → Google provider
- This client ID is public and safe to include in client code

## GitHub OAuth Provider

### GitHub OAuth App Setup

1. Go to https://github.com/settings/developers
2. Click "New OAuth App"
3. Configure the app:
   - **Application name**: `CacheBash`
   - **Homepage URL**: `https://cachebash-app.firebaseapp.com`
   - **Authorization callback URL**: `https://cachebash-app.firebaseapp.com/__/auth/handler`
4. Click "Register application"
5. Copy the **Client ID**
6. Generate a new **Client Secret** and copy it

### Firebase Console Setup

1. Navigate to Firebase Console → Authentication → Sign-in method
2. Click "Add new provider" and select GitHub
3. Enable the provider
4. Paste the **Client ID** from GitHub
5. Paste the **Client Secret** from GitHub
6. Click "Save"

### Mobile App Integration

The mobile app uses `expo-auth-session` for the GitHub OAuth flow:

- Authorization endpoint: `https://github.com/login/oauth/authorize`
- Token endpoint: `https://github.com/login/oauth/access_token`
- The Firebase JS SDK exchanges the OAuth token for a Firebase credential

### Environment Variables

- `GITHUB_CLIENT_ID`: From the GitHub OAuth App settings
- This client ID is public and safe to include in client code

## Mobile App Configuration

### expo-auth-session Setup

The mobile app uses `expo-auth-session` to handle OAuth redirects for both Google and GitHub providers.

- Custom URL scheme: `cachebash` (configured in `app.json`)
- Redirect URI format: `cachebash://`
- The OAuth flow opens a browser for user authentication, then redirects back to the app

### app.json Configuration

```json
{
  "expo": {
    "scheme": "cachebash"
  }
}
```

This scheme enables deep linking for OAuth callbacks.

## Security Notes

- OAuth client IDs are public and safe to include in client code
- Client secrets must never be exposed in client code (only used in Firebase Console)
- Firebase handles token exchange securely on the backend
- expo-auth-session uses secure browser sessions for OAuth flows
